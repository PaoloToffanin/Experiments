function refreshCData(obj)
%REFRESHCDATA Take current Scale, WindowSize, and RefPt to update CData
%from Torus.

% Copyright 2014 The MathWorks, Inc.

rp = obj.RefPt;
ws = obj.WindowSize;
sc = obj.Scale;

c = obj.TileCData(...
    round( rp(2)+(1:ws(2)/sc) ),...
    round( rp(1)+(1:ws(1)/sc) ),...
    :);
% paol8 make only upper size of water move (i.e. choosing only the first 100 pixels)
% c = obj.TileCData(...
%     round( rp(2)+(786:886/sc) ),...
%     round( rp(1)+(1:ws(1)/sc) ),...
%     :);
% this rescales the whole figure to use only 100 pixels. 
% It does make the water move, but fills the screen with it. No good
% c = obj.TileCData(...
%     round( [1:785 (rp(2)+(786:886) )]),...
%     round( rp(1)+(1:ws(1)/sc) ),...
%     :);


set(obj.GfxHandle,'CData',c)